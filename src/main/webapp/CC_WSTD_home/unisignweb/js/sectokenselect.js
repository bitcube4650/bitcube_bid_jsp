var __sectokenselect=function(a){var t=function(d){function q(a){if(!a)return alert("UI load error."),!1;var b=document.createElement("div");document.body.insertBefore(b,document.body.firstChild);b.innerHTML=a;return!0}function m(c){n.restoreOnMouseEvent();if(null==d.args||null==d.args.list)return a.uiUtil().msgBox(c.IDS_MSGBOX_ERROR_NO_SELECTED_DRIVER),!1;var b=d.args.list,h=d.args.list.length;if(0>=h)return a.uiUtil().msgBox(c.IDS_MSGBOX_ERROR_NO_SELECTED_DRIVER),!1;for(var e=!1,f=parseInt(n.selectedIndex()),g=0;g<h;g++)if(b[g].index===f){e="invalid"==b[g].validity?!1:!0;break}if(!1==e&&!1==confirm(c.IDS_MSGBOX_CONFIRM_TRUSTLESS_DRIVER))return!1;d.onConfirm(f,b[g].name);return!0}function k(c){var b;if(null==d.args||null==d.args.list||0>=d.args.list.length)b=null;else{b=null;b=d.args.list;for(var h=d.args.list.length,e=[],f=0;f<h;f++){var g=[];g[0]=b[f].name;g[1]=b[f].driver;g[2]=b[f].validity;g[3]=b[f].index;e[f]=g}b={list:e}}r=a.loadUI("gridlist");n=r({type:"driverslist",tblid:"us-sectoken-select-tbl-list",tbltitleid:"us-sectoken-select-tbl-list-th",titlelistid:"us-sectoken-select-grid-head-div",titlerowid:"us-sectoken-select-list-title-row",titleelementid:"us-sectoken-select-list-title-element",titledividerid:"us-sectoken-select-list-title-divider",titlelistcn:"us-layout-sectoken-select-grid-head-div",titlerowcn:"us-layout-sectoken-select-grid-head-row",titleelementcn:"us-layout-sectoken-select-grid-row-title-element",titledividercn:"us-layout-sectoken-select-grid-row-title-divider",tblbodyid:"us-sectoken-select-tbl-list-td",datalistid:"us-sectoken-select-grid-body-div",datarowid:"us-sectoken-select-list-body-row",dataelementid:"us-sectoken-select-list-data-element",datalistcn:"us-layout-sectoken-select-grid-body-div",datarowcn:"us-layout-sectoken-select-grid-body-row",dataelementcn:"us-layout-sectoken-select-grid-row-data-element",dataselectcn:"us-layout-sectoken-select-grid-row-data-selected-element"});h=!0;"opera"==a.browserName&&(h=!1);b?n.drawList(c,c.length,b.list,b.list.length,l+2,h):n.drawList(c,c.length,null,0,l+2,h)}var p=function(){var c;c=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");c.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/layout/sectokenselect.html?version="+a.ver,!1);c.send(null);return c.responseText},s=function(){var c;c=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");c.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/lang/"+a.ESVS.Language+"/sectokenselect_"+a.ESVS.Language+".js?version="+a.ver,!1);c.send(null);return c.responseText},r=null,n=null,l=a.ESVS.TabIndex;return function(){var c=eval(p),b=eval(eval(s)());q(c());c=document.getElementById("us-sectoken-select-lbl-title");c.appendChild(document.createTextNode(b.IDS_SECTOKEN_SELECTION));c.setAttribute("tabindex",l,0);var h=document.getElementById("us-sectoken-select-lbl-notice");h.innerHTML=b.IDS_SECTOKEN_NOTICE;h.setAttribute("tabindex",l+1,0);var e=document.getElementById("us-sectoken-select-lbl-notice-txt");e.innerHTML=b.IDS_SECTOEKN_SUGGESTION;e.setAttribute("tabindex",l+3,0);e=document.getElementById("us-sectoken-select-install-driver-btn");e.setAttribute("value",b.IDS_SECTOKEN_DRIVER_INSTALL,0);e.setAttribute("tabindex",l+4,0);e.onclick=function(){"firefox"==a.browserName?window.open("http://rootca.or.kr/kor/hsm/hsm.jsp","hsm_url","scrollbars=1"):window.open("http://rootca.or.kr/kor/hsm/hsm.jsp");this.focus()};e=document.getElementById("us-sectoken-select-confirm-btn");e.setAttribute("value",b.IDS_CONFIRM,0);e.setAttribute("tabindex",l+5,0);e.onclick=function(){m(b)};var f=document.getElementById("us-sectoken-select-cancel-btn");f.setAttribute("value",b.IDS_CANCEL,0);f.setAttribute("tabindex",l+6,0);f.onclick=function(){n.restoreOnMouseEvent();d.onCancel()};var g=document.getElementById("us-sectoken-select-cls-img-btn");g.setAttribute("title",b.IDS_SECTOKEN_SELECTION_CLOSE,0);g.setAttribute("tabindex",l+7,0);g.onclick=function(){n.restoreOnMouseEvent();d.onCancel()};document.getElementById("us-sectoken-select-cls-btn-img").setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);a.uiUtil().setRotationTabFocus(f,e,c);a.uiUtil().setRotationTabFocus(c,f,h);k([{title:b.IDS_SECTOKEN_PRODUCT_NAME},{title:b.IDS_SECTOKEN_DRIVER_NAME},{title:b.IDS_SECTOKEN_EXAMINATION_PASSAGE}]);return document.getElementById("us-div-sectoken-select")}()};return function(d){var q=a.uiLayerLevel,m=a.uiUtil().getOverlay(q),k=t({type:d.type,args:d.args,onConfirm:d.onConfirm,onCancel:d.onCancel});k.style.zIndex=q+1;document.body.insertBefore(m,document.body.firstChild);var p=window.onresize;return{show:function(){a.ActiveUI=this;draggable(k,document.getElementById("us-div-sectoken-select-title"));m.style.display="block";a.uiUtil().offsetResize(k);window.onresize=function(){a.uiUtil().offsetResize(k);p&&p()};a.uiLayerLevel+=10;a.ESVS.TabIndex+=30;setTimeout(function(){var a=k.getElementsByTagName("p");if(0<a.length)for(var d=0;d<a.length;d++)"us-sectoken-select-lbl-title"==a[d].id&&a[d].focus()},10)},hide:function(){m.style.display="none";k.style.display="none"},dispose:function(){window.onresize=function(){p&&p()};k.parentNode.parentNode.removeChild(k.parentNode);m.parentNode.removeChild(m);a.uiLayerLevel-=10;a.ESVS.TabIndex-=30}}}};