var __importfile=function(a){function h(a,c){for(var e=document.getElementsByClassName(a),b=0;b<e.length;b++)e[b].classList.contains(c)||e[b].classList.add(c)}function c(a,c){for(var e=document.getElementsByClassName(a),b=0;b<e.length;b++)e[b].classList.remove(c)}function q(a,c){return document.getElementsByClassName(a)[0].classList.contains(c)}var t=function(k){function p(a){if(!a)return alert("UI load error."),!1;var d=document.createElement("div");document.body.insertBefore(d,document.body.firstChild);d.innerHTML=a;return!0}function e(a,d){var g=document.getElementById(a);g.appendChild(document.createTextNode(d));g.setAttribute("tabindex",t++,0);return g}function b(a,d){for(var g=document.getElementById(a),f=0;f<g.children.length;f++)g.children[f].appendChild(document.createTextNode(d[f]));return g}function m(b,d){var g=document.getElementById(b);g.setAttribute("src",a.ESVS.SRCPath+d,0);return g}var v=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/layout/importFileWithDD.html?V="+a.ver,!1);b.send(null);return b.responseText},w=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/lang/"+a.ESVS.Language+"/importfile_"+a.ESVS.Language+".js?V="+a.ver,!1);b.send(null);return b.responseText},l=null,t=a.ESVS.TabIndex,n={},r=0,s=0;n.filelist=[];var u=function(a){if(10485760<s+a.size)alert(l.IDS_ERROR.FILE_SIZE_OVER);else{s+=a.size;var b=new FileReader;b.onload=function(b){n.filelist.push({name:a.name,data:b.target.result.toBase64()});if(r==n.filelist.length){c("us-filelist-sublist","hide");h("view-panel","hide");c("file-info","hide");b=document.getElementsByClassName("us-filelist-sublist");var f;f="<li class='title'>"+l.IDS_FILE_NAME;f+="</li>";for(var d=0;d<n.filelist.length;d++)f+="<li> - ",f+=n.filelist[d].name,f+="</li>";b[0].innerHTML=f;c("us-cert-import-content","drop-here");c("us-cert-import-content","drag");h("us-cert-import-content","drop")}};b.readAsArrayBuffer(a)}};return function(){var a=eval(v);l=eval(eval(w)());p(a());a=document.getElementById("us-div-import-cert");e("us-import-cert-lbl-title",l.IDS_TITLE);m("us-cls-btn-img","unisignweb/rsrc/img/x-btn.png").onclick=function(){k.onCancel()};b("us-content-basic-notice-ul",l.IDS_CONTENT_NOTICE_UL);b("us-content-drop-plz-ul",l.IDS_CONTENT_DROP_UL);var d=document.getElementById("us-btn-cert-import");d.value=l.IDS_CONFIRM;d.onclick=function(a){a.preventDefault();a.returnValue=!1;a.cancelBubble=!0;k.onConfirm(n.filelist)};d=document.getElementById("us-btn-cancel");d.value=l.IDS_CANCEL;d.onclick=function(a){k.onCancel()};d=document.getElementsByClassName("us-cert-import-content")[0];d.onclick=function(a){a.preventDefault();q("file-info","hide")&&(document.getElementById("us-cert-import-file").click(),document.getElementById("us-cert-import-file").onchange=function(a){r=a.target.files.length;for(var b=0;b<a.target.files.length;b++)u(a.target.files[b])})};d.ondragleave=function(a){a.preventDefault()};d.ondragover=function(a){q("file-info","hide")&&(h("us-cert-import-content","drop-here"),c("us-cert-import-content","drag"),h("view-panel","hide"),c("drop-plz","hide"));a.preventDefault()};d.ondrop=function(a){a.preventDefault();if(q("file-info","hide")){c("us-cert-import-content","drop-here");h("us-cert-import-content","drag");h("view-panel","hide");c("basic","hide");var b=a.dataTransfer.files;r=a.dataTransfer.files.length;for(a=0;a<b.length;a++)u(b[a])}return!1};c("basic","hide");return a}()};return function(k){var p=a.uiLayerLevel,e=a.uiUtil().getOverlay(p),b=t({type:k.type,args:k.args,onConfirm:k.onConfirm,onCancel:k.onCancel});b.style.zIndex=p+1;a.ESVS.TargetObj.insertBefore(e,a.ESVS.TargetObj.firstChild);e.ondragleave=function(a){null==a.relatedTarget&&q("file-info","hide")&&(c("us-cert-import-content","drop-here"),h("us-cert-import-content","drag"),h("view-panel","hide"),c("basic","hide"));a.preventDefault()};var m=window.onresize;return{show:function(){e.style.display="block";b.style.position="fix";a.uiUtil().offsetResize(b,"85,center");window.onresize=function(){a.uiUtil().offsetResize(b,"85,center");m&&m()};a.uiLayerLevel+=10;a.ESVS.TabIndex+=30;setTimeout(function(){var a=b.getElementsByTagName("p");if(0<a.length)for(var c=0;c<a.length;c++)"us-lbl-title"==a[c].id&&a[c].focus()},10)},hide:function(){e.style.display="none";b.style.display="none"},dispose:function(){window.onresize=function(){m&&m()};b.parentNode.parentNode.removeChild(b.parentNode);e.parentNode.removeChild(e);a.uiLayerLevel-=10;a.ESVS.TabIndex-=30}}}};