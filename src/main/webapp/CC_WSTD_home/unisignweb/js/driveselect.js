var __driveselect=function(a){var s=function(f){function p(a){if(!a)return alert("UI load error."),!1;var c=document.createElement("div");document.body.insertBefore(c,document.body.firstChild);c.innerHTML=a;return!0}var n=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/layout/driveselect.html?version="+a.ver,!1);b.send(null);return b.responseText},g=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/lang/"+a.ESVS.Language+"/driveselect_"+a.ESVS.Language+".js?version="+a.ver,!1);b.send(null);return b.responseText},d=a.ESVS.TabIndex;return function(){var b=eval(n),c=eval(eval(g)()),q=f.type,l=f.args.list,h=f.args.list.length;p(b());var b=document.getElementById("us-drive-select-lbl-title"),e=document.getElementById("us-drive-select-disk-img"),r=document.getElementById("us-drive-select-disk-name"),k=document.getElementById("us-drive-select-disk-lbl"),m=document.getElementById("us-drive-select-disk-select");document.getElementById("us-drive-select-cls-btn-img").setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);if("DEVICE_REMOVABLE_DISK"===q){if(b.appendChild(document.createTextNode(c.IDS_DRIVE_SELECTION)),b.setAttribute("tabindex",d,0),e.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/media_removable.png",0),r.appendChild(document.createTextNode(c.IDS_DRIVE_REMOVABLE)),k.appendChild(document.createTextNode(c.IDS_DRIVE_SELECTION_CHOOSE_DISK)),m.setAttribute("tabindex",d+1,0),0<h)for(e=0;e<h;e++)k=document.createElement("option"),k.setAttribute("value",l[e].index,0),k.appendChild(document.createTextNode(l[e].name)),m.appendChild(k)}else if("DEVICE_SAVE_TOKEN"===q&&(b.appendChild(document.createTextNode(c.IDS_SAVE_TOKEN_SELECTION)),b.setAttribute("tabindex",d,0),e.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/media_savetoken.png",0),r.appendChild(document.createTextNode(c.IDS_SAVE_TOKEN)),k.appendChild(document.createTextNode(c.IDS_SAVE_TOKEN_CHOOSE_SAVE_TOKEN)),m.setAttribute("tabindex",d+1,0),0<h))for(e=0;e<h;e++)k=document.createElement("option"),k.setAttribute("value",l[e].index,0),k.appendChild(document.createTextNode(l[e].name)),m.appendChild(k);l=document.getElementById("us-drive-select-confirm-btn");l.setAttribute("value",c.IDS_CONFIRM,0);l.setAttribute("tabindex",d+2,0);l.onclick=function(){var a=document.getElementById("us-drive-select-disk-select"),a=parseInt(a.selectedIndex)+1;f.onConfirm(a)};h=document.getElementById("us-drive-select-cancel-btn");h.setAttribute("value",c.IDS_CANCEL,0);h.setAttribute("tabindex",d+3,0);h.onclick=function(){f.onCancel()};m=document.getElementById("us-drive-select-cls-img-btn");"DEVICE_REMOVABLE_DISK"===q?m.setAttribute("title",c.IDS_DRIVE_SELECTION_CLOSE,0):"DEVICE_SAVE_TOKEN"===q&&m.setAttribute("title",c.IDS_SAVE_TOKEN_CLOSE,0);m.setAttribute("tabindex",d+4,0);m.onclick=function(){f.onCancel()};a.uiUtil().setRotationTabFocus(h,l,b);a.uiUtil().setRotationTabFocus(b,h,r);return document.getElementById("us-div-drive-select")}()};return function(f){var p=a.uiLayerLevel,n=a.uiUtil().getOverlay(p),g=s({type:f.type,args:f.args,onConfirm:f.onConfirm,onCancel:f.onCancel});g.style.zIndex=p+1;a.ESVS.TargetObj.insertBefore(n,a.ESVS.TargetObj.firstChild);var d=window.onresize;return{show:function(){draggable(g,document.getElementById("us-div-drive-select-title"));n.style.display="block";a.uiUtil().offsetResize(g);window.onresize=function(){a.uiUtil().offsetResize(g);d&&d()};a.uiLayerLevel+=10;a.ESVS.TabIndex+=30;setTimeout(function(){var a=g.getElementsByTagName("p");if(0<a.length)for(var c=0;c<a.length;c++)"us-drive-select-lbl-title"==a[c].id&&a[c].focus()},10)},hide:function(){n.style.display="none";g.style.display="none"},dispose:function(){window.onresize=function(){d&&d()};g.parentNode.parentNode.removeChild(g.parentNode);n.parentNode.removeChild(n);a.uiLayerLevel-=10;a.ESVS.TabIndex-=30}}}};